<!DOCTYPE html>
<html
  lang="en"
  class="h-screen bg-fixed bg-no-repeat bg-cover bg-linear-180 from-slate-200 to-slate-400 scrollbar-hidden"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AdU Feria Hub</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <script src="src/data.js" type="module" defer></script>
    <link rel="stylesheet" href="src/style.css" />
  </head>

  <body x-data="data" class="select-none">
    <div
      class="shadow-sm navbar bg-linear-180 from-slate-500 from-10% to-90% to-slate-400/50 fixed top-0 z-1 p-2 backdrop-blur-sm"
    >
      <div class="navbar-start">
        <div class="dropdown">
          <div tabindex="0" role="button" class="btn btn-ghost lg:hidden">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-5 h-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h8m-8 6h16"
              />
            </svg>
          </div>
          <ul
            tabindex="0"
            class="w-40 p-2 mt-3 shadow menu menu-sm dropdown-content bg-base-100 rounded-box"
          >
            <li><a @click="setPath('feria')" class="text-lg">Feria</a></li>
            <li><a @click="setPath('about')" class="text-lg">About Us</a></li>
          </ul>
        </div>
      </div>
      <div class="hidden navbar-center lg:flex">
        <ul class="items-center p-0 menu menu-horizontal gap-x-32">
          <li>
            <a @click="setPath('feria')" class="text-2xl">Feria</a>
          </li>
          <li>
            <a @click="setPath('/')" class="p-0"
              ><img class="w-20 h-20 undraggable" src="feria.svg"
            /></a>
          </li>
          <li>
            <a @click="setPath('about')" class="text-2xl">About Us</a>
          </li>
        </ul>
      </div>
      <div class="navbar-end"></div>
    </div>

    <div class="my-22 lg:my-30">
      <div
        x-show="currentPath == 'feria'"
        x-transition
        class="lg:mx-24 xl:mx-96"
      >
        <div class="flex flex-col gap-5 m-3 mb-5 lg:flex-row">
          <label class="w-full lg:flex-1 input input-lg bg-slate-500/60">
            <svg
              class="h-[1em] opacity-50"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
            >
              <g
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="2.5"
                fill="none"
                stroke="currentColor"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.3-4.3"></path>
              </g>
            </svg>
            <input
              type="search"
              class="bg-none"
              autocomplete="off"
              placeholder="Search..."
              x-model.debounce.500ms="searchQuery"
            />
            <kbd class="invisible lg:visible bg-slate-500/60 kbd kbd-md">/</kbd>
          </label>

          <select
            class="w-full lg:w-1/4 lg:flex-none bg-slate-500/60 select select-lg"
            x-model="filterQuery"
          >
            <option selected>(Show all)</option>
            <option>Academic Commission</option>
            <option>Food</option>
            <option>Arts and Crafts</option>
            <option>Pre-loved</option>
            <option>Others</option>
          </select>
        </div>

        <p class="text-gray-400" x-show="isLoading">Loading...</p>
        <div
          class="grid items-stretch grid-cols-1 gap-5 m-3 md:grid-cols-2 xl:grid-cols-3 3xl:grid-cols-5"
        >
          <template x-for="(res, i) in responses">
            <div
              class="w-full h-64 transition-transform duration-150 shadow-lg cursor-pointer w-overflow-hidden card bg-slate-500/60 hover:bg-slate-400/80 lg:hover:scale-105"
              x-show="res.Name1.toLowerCase().includes(searchQuery.toLowerCase()) && (res.Type === filterQuery || filterQuery.includes('Show all'))"
              x-transition
              @click="Function(`mdl${i}.showModal()`)"
            >
              <figure class="w-full h-full">
                <img
                  class="object-fill max-w-md undraggable"
                  :src="res['image']"
                  alt=""
                />
              </figure>
              <div class="card-body">
                <div class="py-0 italic" x-text="res.Type"></div>
                <div class="flex items-center justify-between gap-3">
                  <h2 class="text-xl card-title" x-text="res.Name1"></h2>
                  <span
                    class="text-xl font-bold"
                    x-text="`₱${res.Price}`"
                  ></span>
                </div>
              </div>

              <dialog
                :id="`mdl${i}`"
                class="cursor-default md:transition-none modal modal-bottom md:modal-middle"
              >
                <div class="backdrop-blur-sm bg-slate-800/50 modal-box">
                  <form method="dialog">
                    <button
                      class="absolute btn btn-sm btn-circle btn-ghost right-2 top-2"
                    >
                      ✕
                    </button>
                  </form>

                  <div class="flex flex-col undraggable">
                    <h3 class="text-lg font-bold" x-text="res.Name1"></h3>
                    <p class="text-lg" x-text="`by ${res.Name}`"></p>
                  </div>
                  <p class="pt-4 undraggable" x-text="res.Description"></p>
                </div>
              </dialog>
            </div>
          </template>
        </div>
      </div>
    </div>
  </body>
</html>
